<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Explore Sociology</title>
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <link rel="stylesheet" href="styles.css">
    <!-- Auth0 SDK lisätty -->
    <script src="https://cdn.auth0.com/js/auth0-spa-js/1.13/auth0-spa-js.production.js"></script>
</head>
<body>
    <header>
        <h1>Explore Sociology</h1>
        <button class="menu-toggle">☰</button> <!-- Menu toggle button -->
        <nav>
            <ul class="main-nav">
                <li><a href="#sociology">Sociology</a>
                    <ul class="dropdown">
                        <li><a href="sociologists.html">Significant Sociologists</a></li>
                    </ul>
                </li>
                <li><a href="#education">Education</a>
                    <ul class="dropdown">
                        <li><a href="#future">The Future of Education</a></li>
                    </ul>
                </li>
            </ul>
        </nav>
    </header>

    <section id="sociology">
        <h2>Sociology</h2>
        <p>Discover the pioneers of sociology and their contributions to understanding society.</p>
    </section>

    <section id="education">
        <h2>Education</h2>
        <p>Explore how education systems are evolving and what the future might hold.</p>
    </section>

    <footer>
        <p>Copyright © 2024 by Explore Sociology</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', async () => {
        const auth0 = await createAuth0Client({
            domain: 'dev-ceflg.eu.auth0.com',
            client_id: 'OQmh2Tt36nz75RCfMCpmRHIq9KZ1gTt0',
            redirect_uri: window.location.origin
        });

        // Tarkista, sisältääkö URL autentikointikoodin
        if (window.location.search.includes('code=')) {
            // Käsittele redirect callback ja puhdista URL
            await auth0.handleRedirectCallback();
            window.history.replaceState({}, document.title, window.location.pathname);
        }

        // Tarkista onko käyttäjä autentikoitu
        const isAuthenticated = await auth0.isAuthenticated();
        if (isAuthenticated) {
            // Näytä käyttäjän profiili
            const user = await auth0.getUser();
            console.log(user);
            // Jatka sovelluksen normaalia logiikkaa
        } else {
                // Ei autentikoitu, käynnistä kirjautuminen
                await auth0.loginWithRedirect();
            }
        });
    </script>
</body>
</html>
